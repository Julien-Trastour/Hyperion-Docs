"use strict";(self.webpackChunkhyperion_docs=self.webpackChunkhyperion_docs||[]).push([[9045],{8342:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"kronos/auth_service/index","title":"\ud83d\udccc Auth-Service - Gestion de l\'Authentification et des Permissions","description":"\ud83d\ude80 R\xf4le","source":"@site/docs/kronos/auth_service/index.md","sourceDirName":"kronos/auth_service","slug":"/kronos/auth_service/","permalink":"/Hyperion-Docs/docs/kronos/auth_service/","draft":false,"unlisted":false,"editUrl":"https://github.com/Julien-Trastour/Hyperion-Docs.git/edit/main/docs/kronos/auth_service/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"deployment","permalink":"/Hyperion-Docs/docs/kronos/deployment"},"next":{"title":"\ud83d\udccc JWT - Gestion des Tokens d\'Authentification","permalink":"/Hyperion-Docs/docs/kronos/auth_service/jwt"}}');var r=n(4848),t=n(8453);const o={},c="\ud83d\udccc Auth-Service - Gestion de l'Authentification et des Permissions",d={},l=[{value:"\ud83d\ude80 R\xf4le",id:"-r\xf4le",level:2},{value:"\ud83d\udd10 Fonctions principales",id:"-fonctions-principales",level:2},{value:"\ud83d\udee0 Technologies utilis\xe9es",id:"-technologies-utilis\xe9es",level:2},{value:"\ud83d\udd17 Interactions avec les autres microservices",id:"-interactions-avec-les-autres-microservices",level:2},{value:"\ud83d\udee0 Endpoints API Principaux",id:"-endpoints-api-principaux",level:2},{value:"\ud83d\udd11 <strong>Authentification et Sessions</strong>",id:"-authentification-et-sessions",level:3},{value:"\ud83d\udd0f <strong>Gestion des Permissions et R\xf4les</strong>",id:"-gestion-des-permissions-et-r\xf4les",level:3},{value:"\ud83d\udd10 <strong>S\xe9curit\xe9 et MFA</strong>",id:"-s\xe9curit\xe9-et-mfa",level:3},{value:"\ud83d\ude80 S\xe9curit\xe9 et Bonnes Pratiques",id:"-s\xe9curit\xe9-et-bonnes-pratiques",level:2}];function a(e){const s={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"-auth-service---gestion-de-lauthentification-et-des-permissions",children:"\ud83d\udccc Auth-Service - Gestion de l'Authentification et des Permissions"})}),"\n",(0,r.jsx)(s.h2,{id:"-r\xf4le",children:"\ud83d\ude80 R\xf4le"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"auth-service"})," est le microservice responsable de ",(0,r.jsx)(s.strong,{children:"l\u2019authentification des utilisateurs et des services"})," au sein de l\u2019\xe9cosyst\xe8me Kronos. Il g\xe8re la ",(0,r.jsx)(s.strong,{children:"cr\xe9ation, validation et expiration des tokens"})," d\u2019acc\xe8s et assure la ",(0,r.jsx)(s.strong,{children:"s\xe9curisation des endpoints API"})," via des permissions granulaires."]}),"\n",(0,r.jsx)(s.h2,{id:"-fonctions-principales",children:"\ud83d\udd10 Fonctions principales"}),"\n",(0,r.jsxs)(s.p,{children:["\u2705 ",(0,r.jsx)(s.strong,{children:"Authentification des utilisateurs"})," via JWT et OAuth2.",(0,r.jsx)(s.br,{}),"\n","\u2705 ",(0,r.jsx)(s.strong,{children:"Gestion des permissions et r\xf4les"})," (RBAC - Role-Based Access Control).",(0,r.jsx)(s.br,{}),"\n","\u2705 ",(0,r.jsx)(s.strong,{children:"Gestion des sessions et rafra\xeechissement des tokens"}),".",(0,r.jsx)(s.br,{}),"\n","\u2705 ",(0,r.jsx)(s.strong,{children:"V\xe9rification et validation des acc\xe8s pour les autres microservices"}),".",(0,r.jsx)(s.br,{}),"\n","\u2705 ",(0,r.jsx)(s.strong,{children:"Support de l\u2019authentification multi-facteurs (MFA) en option"}),".",(0,r.jsx)(s.br,{}),"\n","\u2705 ",(0,r.jsx)(s.strong,{children:"Journalisation des tentatives de connexion et d\xe9tection des acc\xe8s suspects"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"-technologies-utilis\xe9es",children:"\ud83d\udee0 Technologies utilis\xe9es"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Node.js + Express"})," pour l\u2019API REST d\u2019authentification."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"JWT (JSON Web Token)"})," pour la gestion des sessions et permissions."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"OAuth2/OpenID Connect"})," pour l\u2019authentification externe."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"PostgreSQL"})," pour stocker les utilisateurs et leurs r\xf4les."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Redis"})," pour la gestion des sessions et des tokens de rafra\xeechissement."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"argon2"})," pour le hachage des mots de passe."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"2FA/MFA (optionnel)"})," via TOTP (Time-Based One-Time Password)."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"-interactions-avec-les-autres-microservices",children:"\ud83d\udd17 Interactions avec les autres microservices"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\ud83d\udccc Microservice"}),(0,r.jsxs)(s.th,{children:["\ud83d\udd04 Interaction avec ",(0,r.jsx)(s.code,{children:"auth-service"})]})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"/Hyperion-Docs/docs/kronos/kronos_index",children:"Kronos"})})}),(0,r.jsx)(s.td,{children:"Fournit l'authentification et v\xe9rifie les acc\xe8s aux services"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"/Hyperion-Docs/docs/kronos/user_service/",children:"User-Service"})})}),(0,r.jsx)(s.td,{children:"Gestion des utilisateurs et de leurs permissions"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"/Hyperion-Docs/docs/kronos/router_service/",children:"Router-Service"})})}),(0,r.jsx)(s.td,{children:"Contr\xf4le l'acc\xe8s aux routes API via JWT"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"/Hyperion-Docs/docs/ouranos_crm/ouranos_crm_index",children:"Ouranos CRM"})})}),(0,r.jsx)(s.td,{children:"V\xe9rification des acc\xe8s clients et abonnements"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"/Hyperion-Docs/docs/ouranos_desk/ouranos_desk_index",children:"Ouranos Desk"})})}),(0,r.jsx)(s.td,{children:"Authentification des techniciens et acc\xe8s SAV"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"/Hyperion-Docs/docs/hyperion/hyperion_index",children:"Hyp\xe9rion"})})}),(0,r.jsx)(s.td,{children:"V\xe9rification des acc\xe8s utilisateurs pour le contr\xf4le du robot"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"/Hyperion-Docs/docs/hermes/hermes_index",children:"Herm\xe8s"})})}),(0,r.jsx)(s.td,{children:"Authentification des abonn\xe9s pour leur espace client"})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"-endpoints-api-principaux",children:"\ud83d\udee0 Endpoints API Principaux"}),"\n",(0,r.jsxs)(s.h3,{id:"-authentification-et-sessions",children:["\ud83d\udd11 ",(0,r.jsx)(s.strong,{children:"Authentification et Sessions"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"POST /auth/login"})," \u2192 Connexion et g\xe9n\xe9ration de token JWT."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"POST /auth/refresh"})," \u2192 Rafra\xeechissement du token d\u2019acc\xe8s."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"POST /auth/logout"})," \u2192 D\xe9connexion et invalidation du token."]}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"-gestion-des-permissions-et-r\xf4les",children:["\ud83d\udd0f ",(0,r.jsx)(s.strong,{children:"Gestion des Permissions et R\xf4les"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"GET /auth/roles"})," \u2192 R\xe9cup\xe9ration des r\xf4les disponibles."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"POST /auth/roles"})," \u2192 Cr\xe9ation d\u2019un r\xf4le personnalis\xe9."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"DELETE /auth/roles/:id"})," \u2192 Suppression d\u2019un r\xf4le."]}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"-s\xe9curit\xe9-et-mfa",children:["\ud83d\udd10 ",(0,r.jsx)(s.strong,{children:"S\xe9curit\xe9 et MFA"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"POST /auth/mfa/setup"})," \u2192 Activation du MFA pour un utilisateur."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"POST /auth/mfa/verify"})," \u2192 V\xe9rification du code MFA."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"-s\xe9curit\xe9-et-bonnes-pratiques",children:"\ud83d\ude80 S\xe9curit\xe9 et Bonnes Pratiques"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Stockage s\xe9curis\xe9 des mots de passe"})," avec bcrypt."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Expiration et rotation automatique des tokens"})," pour r\xe9duire les risques."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Journalisation des connexions"})," pour d\xe9tecter les tentatives suspectes."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Mise en cache avec Redis"})," pour optimiser la gestion des sessions."]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>c});var i=n(6540);const r={},t=i.createContext(r);function o(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);